* OS Integration
#+BEGIN_SRC emacs-lisp
(setq mac-command-modifier 'control)


(when (memq window-system '(mac ns x))
  (setq php-boris-command "~/boris/bin/boris"))

#+END_SRC

* Eshell
#+BEGIN_SRC emacs-lisp
(after! eshell
  (add-hook 'eshell-mode-hook #'eshell-bookmark-setup))


(setq term-input-ring-size 200)
(setq term-buffer-maximum-size 8191)
(setq eshell-history-ring 1028)

#+END_SRC

* Theming and appearance
#+BEGIN_SRC emacs-lisp
(load-theme 'doom-challenger-deep t)

(doom-themes-visual-bell-config)
(doom-themes-neotree-config)
(doom-themes-treemacs-config)
(doom-themes-org-config)


(add-hook 'doom-after-init-modules-hook (lambda () (set-face-attribute 'default nil :height 170)))
(add-to-list 'default-frame-alist '(fullscreen . maximized))

(show-paren-mode 1)
(display-time-mode 1)
#+END_SRC

* Org Mode
#+BEGIN_SRC emacs-lisp
(after! org
  (load-file "~/capture-templates.el")
  (setq org-agenda-files '("~/Desktop/Notes.org"))
  (setq org-imenu-depth 15)
  (setq imenu-max-items 0))
#+END_SRC

* Keybinds
#+BEGIN_SRC emacs-lisp
(defvar my-workspace-map (make-sparse-keymap)
  "Project and workspace shifting")

(map! (:map my-workspace-map
        "." #'+workspace/switch-to
        "n" #'+workspace/new
        "s" #'+workspace/save
        "l" #'+workspace/load
        "r" #'+workspace/rename
        "o" #'+workspace/other
        "i" #'clone-indirect-buffer
        "u" #'winner-undo
        "R" #'winner-redo
        [tab]  #'+workspace/display
        "d"  #'+workspace/delete
        "1" #'+workspace/switch-to-0
        "2" #'+workspace/switch-to-1
        "3" #'+workspace/switch-to-2
        "4" #'+workspace/switch-to-3
        "5" #'+workspace/switch-to-4
        "6" #'+workspace/switch-to-5
        "7" #'+workspace/switch-to-6
        "8" #'+workspace/switch-to-7
        "9" #'+workspace/switch-to-8)
      :g "C-c w" my-workspace-map
      :g "M-z" #'zap-up-to-char
      (:after term
        :map term-mode-map
        :i "C-y" #'term-paste
        :map term-raw-map
        :i "C-y" #'term-paste))

#+END_SRC

* Buffers
#+BEGIN_SRC emacs-lisp
(setq uniquify-buffer-name-style 'post-forward-angle-brackets)
#+END_SRC

* ace window
#+BEGIN_SRC emacs-lisp
;; Set the dvorak version of the improve home row bindings
(setq aw-keys '(?a ?o ?e ?u ?i ?d ?h ?t ?n))
#+END_SRC

* Blacken Things
#+BEGIN_SRC emacs-lisp
(load "~/config_files/blacken.el")
(add-hook 'python-mode-hook 'blacken-mode)

(evil-define-key 'insert ein:edit-cell-mode-map (kbd "C-x C-s") (lambda () (interactive) (blacken-buffer) (ein:edit-cell-save)))
(evil-define-key 'hybrid ein:edit-cell-mode-map (kbd "C-x C-s") (lambda () (interactive) (blacken-buffer) (ein:edit-cell-save)))
(evil-define-key 'normal ein:edit-cell-mode-map (kbd "C-x C-s") (lambda () (interactive) (blacken-buffer) (ein:edit-cell-save)))

(evil-define-key 'normal ein:edit-cell-mode-map (kbd "C-c '") (lambda () (interactive) (blacken-buffer) (ein:edit-cell-exit)))
(evil-define-key 'insert ein:edit-cell-mode-map (kbd "C-c '") (lambda () (interactive) (blacken-buffer) (ein:edit-cell-exit)))
(evil-define-key 'hybrid ein:edit-cell-mode-map (kbd "C-c '") (lambda () (interactive) (blacken-buffer) (ein:edit-cell-exit)))

#+END_SRC

* Search
#+BEGIN_SRC emacs-lisp
(after! counsel
  (setq counsel-rg-base-command "rg -S --no-heading -g !TAGS --line-number --color never %s ."))
#+END_SRC

* dired
#+BEGIN_SRC emacs-lisp
(put 'dired-find-alternate-file 'disabled nil)
#+END_SRC
* Writing
#+BEGIN_SRC emacs-lisp
(add-hook 'darkroom-mode-hook 'visual-line-mode)

(if (eq system-type 'gnu/linux)
    (with-eval-after-load 'ox-latex
      (add-to-list 'org-latex-classes
                   '("memoir-book"
                     "\\documentclass[11pt,a4paper]{memoir}"
                     ("\\chapter{%s}" . "\\chapter*{%s}")
                     ("\\section{%s}" . "\\section*{%s}")
                     ))))

#+END_SRC
* Projects

** Treemacs
#+BEGIN_SRC emacs-lisp
(after! treemacs
  (treemacs-follow-mode))

#+END_SRC

* Say Hello to confirm things finished
#+BEGIN_SRC emacs-lisp

(message "Hello, we reached the end")
#+END_SRC
